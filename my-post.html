<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>rain's blog | rain's blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="" />
    <meta name="author" content="qiu" />
    <meta name="kittycheck_rumble" content="true" />
    <meta name="kittycheck_position" content="top=60,right=60" />

    <!-- Le styles -->
    <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/theme/css/font-awesome.css" rel="stylesheet">
    <link href="/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/theme/img/favicon.ico">
    <link rel="apple-touch-icon" href="/theme/img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/theme/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/theme/img/apple-touch-icon-114x114.png">

    <link href="/" type="application/atom+xml" rel="alternate" title="rain's blog ATOM Feed" />
    <link href="/feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="rain's blog RSS Feed" />
  </head>
  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="/index.html">rain's blog </a>
          <div class="nav-collapse">
            <ul class="nav">
                <li class="divider-vertical"></li>
                <li class="active">
                  <a href="/category/python.html">
						        <i class="icon-folder-open icon-large"></i>Python
					         </a>
                </li>
              <ul class="nav pull-right">
                    <li><a href="/archives.html"><i class="icon-th-list"></i>Archives</a></li>
              </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row">
        <div class="span8" id="content">
<div class="row">
    <div class="span2">
        <div class="well">
<footer class="post-info">
<abbr class="published" title="2015-02-03T10:20:00+08:00">
    <i class="icon-calendar"></i>&nbsp;Tue 03 February 2015
</abbr>
<br/><a href="/author/rain.html"><i class="icon-user"></i>&nbsp;rain</a>


<br/>
	&nbsp;&nbsp;<a href="/tag/pelican.html" class="label"><i class="icon-tag"></i>&nbsp;Pelican</a>
	&nbsp;&nbsp;<a href="/tag/python.html" class="label"><i class="icon-tag"></i>&nbsp;Python</a>
	&nbsp;&nbsp;<a href="/tag/github.html" class="label"><i class="icon-tag"></i>&nbsp;GitHub</a>
	&nbsp;&nbsp;<a href="/tag/git.html" class="label"><i class="icon-tag"></i>&nbsp;Git</a>
	&nbsp;&nbsp;<a href="/tag/blog.html" class="label"><i class="icon-tag"></i>&nbsp;Blog</a>
</footer><!-- /.post-info -->        </div>
    </div>
    <div class="span6">
<section id="content" class="well">
    <article>
        <header>
            <h1>
                <a href=""
                        rel="bookmark"
                        title="Permalink to rain's blog">
                        rain's blog
                </a>
            </h1>
        </header>
        <div class="entry-content">

        <h1>菜鸟零基础使用pelican成功在github上搭建博客</h1>
<p><strong>ps:这个版本绝对靠谱，修复了网上很多教程的错误，而且也很详尽</strong></p>
<p>由于工作的原因，接触了pelican，发现它很方便，于是菜鸟就有了以下的折腾：</p>
<h2>Pelican</h2>
<p><strong>Pelican是一个用Python语言编写的静态网站生成器，</strong>支持使用restructuredText和Markdown写文章，配置灵活，扩展性强。目前Pelican已发布3.5.0版本，有许多优秀的主题和插件可供使用(对于增强blog效果很好使)。先安装好pelican和git，这两个软件的安装很简单，git直接用apt-get安装，pelican是用python开发的，直接用pip安装就行.</p>
<ul>
<li>apt-get install git</li>
<li>pip install pelican  #如果还有菜鸟像我一样不知道pip是什么的，应该去了解一下，这里就不累述了，毕竟不是这里讨论的重点</li>
</ul>
<p>注：直接pip安装的pelican版本是3.5.0，默认的theme是simple，不支持disqus三方评论系统，这个小插曲害惨我了，后面再说</p>
<h3>利用pelican快速构建本地blog</h3>
<p><strong>1.选择博客目录</strong></p>
<p>选择一个blog目录，用命令pelican-quickstart初始化一个网站结构出来(按照提示一步步走)，运行命令之后，应该会有以下有效文件：</p>
<div class="highlight"><pre>cache   develop_server.sh   Makefile    pelicanconf.py
pelican.pid publishconf.py content  fabfile.py  output  
pelicanconf.pyc pelican-plugins     srv.pid
</pre></div>


<p>这些文件盒目录大概都是什么作用的呢，以下简单说明一下:</p>
<div class="highlight"><pre>     content这里是放置你的博文的，例如我的rain.md文章；

     pages是让用户可以自己定制些页面，比如aboutme.md等等页面；

     output这个目录下放置的就是一会利用pelican生成的静态博客内容，当然是html的；

     pelicanconf.py，是博客的配置文件，后面慢慢讲；

     Makefile，make命令的配置文件，如果你懂linux的源码编译安装软件，这个就很熟了，不过不懂也没事，楼主也不懂，pelican就是可以让像我这样的菜鸟也可以自己搭建blog

     develop_server.sh 本地服务的脚本,后面可以接参数start|stop|restart [Port]默认是8000号端口
</pre></div>


<p><strong>2.新建博文</strong></p>
<p>在content目录下新建博文--rain.md：</p>
<blockquote>
<p>Title: rains blog</p>
<p>Date: 2015-02-03 10:20</p>
<p>Category: Python</p>
<p>Tags: Pelican, Python, GitHub, Git, Blog</p>
<p>Slug: my-post</p>
<p>Author: rain</p>
<p>Summary: a blog for pelican on GitHub</p>
<p>**Pelican是一个用Python语言编写的静态网站生成器，**支持使用restructuredText和Markdown写文章，配置灵活，扩展性强。目前Pelican已发布3.5.0版本，有许多优秀的主题和插件可供使用(对于增强blog效果很好使)。先安...</p>
</blockquote>
<p><strong>3.生成博客html文件</strong></p>
<p>在blog目录下用命令make html或者启动脚本./develop_server.sh start生成html文件，生成的html文件全部在output目录下，大概有以下文件：</p>
<div class="highlight"><pre>archives.html  build category my-childhood.html  README.md 
tags.html author cache feeds output sitemap.xml  theme
authors.html categories.html index.html pelican.pid srv.pid
</pre></div>


<p>本地浏览器访问一下，http://localhost:8000，应该可以看到blog的内容，只不过默认pelican使用的是simple主题，效果不是很好</p>
<p><strong>4.修改默认的themes</strong></p>
<p>去github将pelican的themes拿下来，点击<a href="http://www.pelicanthemes.com/">pelican themes</a>可以看到各种themes的效果<a href="https://github.com/getpelican/pelican-themes">pelican repo</a>，将其clone下来，发现国内访问github普遍比较慢，电信的好点，联通的不行。然后修改blog目录下的pelicanconf.py配置文件，增加THEME = "theme's path" //这里特别推荐new-bootstrap2这个theme，效果很好，而且支持disqus重新make html或者./develop_server.sh restart，再次本地浏览一下，发现这个theme的效果好多了吧，pelican的本地blog算是弄好了，现在要做的是将其上传到github上面，下面将详细介绍这部分内容</p>
<h2>申请GitHub账号</h2>
<p>这里有三个概念应该要了解一下：</p>
<ul>
<li>git</li>
<li>github</li>
<li>github pages</li>
</ul>
<p>当然不懂也可以，像博主这样的菜鸟就是完全不懂这三个概念，丝毫不影响在github上面的操作，只不过如果了解一点的话，印象会比较深刻。
去到<a href="https://github.com/">github官网</a>申请一个账号，so easy，都是菜鸟最喜欢的下一步下一步，github为每个账号免费提供了300M的存储空间，申请好账号之后新建一个repository，注意repository的名字必须为<strong>账号.github.io</strong>或者<strong>账号.github.com</strong>，这是为了可以访问到你的blog，所以注册时账号id肯定要unique的，至于为什么仓库名字必须是那两种形式呢，这应该是github考虑到了域名的问题，就干脆那样子规定了，一定unique的账号再加上后面.github.io的二级域，就可以找到你的blog了；其实这里还有一个问题：github的两种pages模式</p>
<div class="highlight"><pre>1.User/Organization Pages 个人或公司站点
 使用自己的用户名，每个用户名下面只能建立一个；
 资源命名必须符合这样的规则username/username.github.io；
 主干上内容被用来构建和发布页面

2.Project Pages 项目站点
 gh-pages分支用于构建和发布；
 如果user/org pages使用了独立域名，那么托管在账户下的所有project pages将使用相同的域名进行重定向，除非project pages使用了自己的独立域名；
 如果没有使用独立域名，project pages将通过子路径的形式提供服务username.github.com/projectname；
 自定义404页面只能在独立域名下使用，否则会使用User Pages 404；
</pre></div>


<p>注：其实这个问题就是博主一开始说要了解一下那三个概念的原因，github pages两种模式，很明显博主用的是第一种，<strong>所以仓库名字一定要注意</strong></p>
<p>刚新建好的repo是空的，github那里会有例子教你新建仓库或者将一个已存在的仓库push到github上面，此时可以在pelican的output目录下
新建仓库了，主要就是以下五步曲(四步)：</p>
<ul>
<li>git init  #初始化一个git仓库，会生成.git目录，里面有git仓库所需要的各种文件，不用理它</li>
<li>git add .  #将当前目录的所有文件add到git仓库里，出于staged状态</li>
<li>git commit -m "banner"  #提交staged状态的文件</li>
<li>git remote add origin git@github.com:git-rain/git-rain.github.io.git  #在远程git-rain.github.io仓库创建一个名字叫做origin，这一步只需要一次</li>
<li>git push origin master   #推博客html文件到origin仓库(即git-rain.github.io仓库)的master分支上</li>
</ul>
<p>注：最后推的时候，博主用的url是git@github.com:git-rain/git-rain.github.io.git即ssh形式，其实新建仓库的时候，github那里就会显示有两个url可以访问你的github pages，一个是https://github.com/id/repo.git的形式，另外一个是git@github.com:id/repo.git，第一种方法基于https，第二种方法基于ssh，都是加密的安全传输；不过第一种方法要手动输入github账号的用户名密码，每次都要输入很麻烦而且在脚本中不好实现自动pull代码，第二种方法只要将本地ssl公钥上传到github上面既可实现不用输入用户名密码直接pull代码，很明显博主这里用的是第二种方法，如下：</p>
<blockquote>
<p>1.本地生成ssl公私密钥对，ssh-keygen -t rsa -f ~/.ssh/id_rsa -C 123@56.com #注：这里最好用默认的存放密钥的路径，否则git push可能会找不到私钥</p>
<p>2.将公钥内容上传到github，点击Edit profile那里的SSH keys按钮，粘贴进去，注意要将id_rsa.pub的全部内容粘贴</p>
<p>3.然后ssh -T git@github.com，如果看到Hi git-rain! You've successfully authenticated, but GitHub does not provide shell access.类似的提示，则验证成功</p>
</blockquote>
<p>将博客html文件push上去之后，可以用git-rain.github.io去访问一下，发现已经可以访问了，网上很多人说push完成之后要等十分钟左右，博主比较幸运，上传完成立即就可以访问了，终于在github上面看到自己亲手搭建起来的blog了，有点小兴奋，保持状态，<strong>go on！</strong></p>
<h3>pelican结合disqus</h3>
<p>此时很遗憾地发现blog竟没有评论系统，pelican本身没有此功能，不过支持disqus这个大众的三方评论系统，默认很多themes都是启用了该支持的，不过神坑的就是博主一开始不知道pelican3.5.0默认的themes是不支持disqus的，后来在<a href="http://querbalken.net/howto-setup-comments-with-disqus-in-pelican-en.html">这篇blog</a>得到了帮助，很明显这也是一篇和博主一样类型的blog。</p>
<div class="highlight"><pre>PS：网上很多中文的教程没有说到这一点，他们使用的themes都是支持disqus的，所以直接忽略了这点，对于我们小白来说，也是致命的伤害啊，所以博主建议以后多用google(fq自己解决，多看英文资料)
</pre></div>


<p>后来楼主使用的themes是new-bootstrap2，效果挺不错的，也支持disqus,现在要做的就是去disqus上面申请一个站绑定你blog的域名可以去<a href="https://disqus.com/">disqus 官网</a>注册一个账号，并且add your site to disqus，上面要填的主要是blog的域名和disqus的shortname，注意shortname必须unique，而且一旦add成功了要记下来然后回到pelican，配置一下pelicanconf.py文件，增加一条：DISQUS_STIENAME = "shortname"</p>
<p>其实pelicanconf.py还可以配置很多东西，详细可以参考<a href="http://docs.getpelican.com/en/3.2/settings.html">pelican配置</a>，由于这里是菜鸟脱白，就不说了，其实重点是博主我也不懂！</p>
<p>配置完成后，按照老套路，make html，其实本地查看已经发现有评论系统了，四部曲将代码push到github，然后刷新一下浏览器，见证奇迹的时刻到了，可以正常评论blog了，一个基本的blog就这样完成了，很感谢网上各位大神的帮助，帮助小白搭建blog，也希望大家能够按照此教程完成自己blog的搭建，赶快join github把，要不然就真的很out了，当然现在也已经out了。</p>
<p>还有关于博客内容格式的问题，其实就是md使用习惯的问题，看你md用得怎么样了，如果很熟练的话，排出来的格式可以很好看，博主就是不会用md，所以博客排版格式很恶心，哈哈！</p>
        </div><!-- /.entry-content -->
        <div class="comments">
        <h2>Comments !</h2>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
               var disqus_identifier = "my-post.html";
               (function() {
                    var dsq = document.createElement('script');
                    dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = 'http://git-rain.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] ||
                     document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
        </div>
    </article>
</section>
</div>
</div>
        </div><!--/span-->
        <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-external-link"></i>blogroll</h4></li>
    <li><div><i class="icon-external-link"></i><a href="http://getpelican.com/">Pelican</a></div></li>
    <li><div><i class="icon-external-link"></i><a href="http://python.org/">Python.org</a></div></li>
    <li><div><i class="icon-external-link"></i><a href="http://baidu.com/">Baidu</a></div></li>
    <li><div><i class="icon-external-link"></i><a href="#">You can modify those links in your config file</a></div></li>
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
<li><a href="/" rel="alternate"><i class="icon-bookmark icon-large"></i>atom feed</a></li>
<li><a href="/feeds/all.rss.xml" rel="alternate"><i class="icon-bookmark icon-large"></i>rss feed</a></li>
    <li><a href="#"><i class="icon-You can add links in your config file-sign icon-large"></i>You can add links in your config file</a></li>
    <li><a href="#"><i class="icon-Another social link-sign icon-large"></i>Another social link</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="/category/python.html">
    <i class="icon-folder-open icon-large"></i>Python
</a>
</li>

<li class="nav-header"><a href="/tags.html"><h4><i class="icon-tags icon-large"></i>Tags</h4></a></li>
    <li class="tag-4">
        <a href="/tag/pelican.html">
            <i class="icon-tag icon-large"></i>Pelican
        </a>
    </li>
    <li class="tag-4">
        <a href="/tag/blog.html">
            <i class="icon-tag icon-large"></i>Blog
        </a>
    </li>
    <li class="tag-4">
        <a href="/tag/github.html">
            <i class="icon-tag icon-large"></i>GitHub
        </a>
    </li>
    <li class="tag-4">
        <a href="/tag/git.html">
            <i class="icon-tag icon-large"></i>Git
        </a>
    </li>
    <li class="tag-4">
        <a href="/tag/python.html">
            <i class="icon-tag icon-large"></i>Python
        </a>
    </li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

    </div><!--/.fluid-container-->

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-59221660-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="/theme/js/jquery-1.7.2.min.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
  </body>
</html>